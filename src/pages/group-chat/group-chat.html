<!--
  Generated template for the ChathandlerPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <div class="dropdown" style="float: right;
		margin-right: 20px;
		margin-top: 12px;">
				
					
							  <ion-icon class="dropdown-toggle"  data-toggle="dropdown" name="more" style="color:#fff"></ion-icon>
							  
							
					
					<ul class="dropdown-menu dropdown-right" style="margin-top: 19px !important;">
					  <li ><a href="#" (click)="goToGroupInfo()" style="padding:7px 20px">View group info </a></li>
					  <li><a href="#"  (click)="Clear_Conversation()" style="padding:7px 20px">Clear Conversation</a></li>
					  <li><a href="#"  (click)="Report_Conversation()" style="padding:7px 20px">Report Conversation</a></li>
					  <!-- <li  *ngIf="is_blocked==false"><a href="#"  (click)="Block(currentUserID)" style="padding:7px 20px">Block</a></li>
					  <li *ngIf="is_blocked==true"><a href="#"  (click)="unBlock(currentUserID)" style="padding:7px 20px">Unblock</a></li> -->
					</ul>
				  </div>
        <!-- <div class="dropdown" style="float:right;">
          
            <ion-buttons end  data-toggle="dropdown">
                <button ion-button icon-only class="dropdown-toggle" data-toggle="dropdown">
                  <ion-icon name="more"></ion-icon>
                  
                </button>
              </ion-buttons>
            
            <ul class="dropdown-menu">
              <li><a href="#">View Profile </a></li>
              <li><a href="#">Clear Conversation</a></li>
              <li><a href="#">Report Conversation</a></li>
            </ul>
            </div> -->
        
    <!-- <div >
        <ul>
          <li>
            <a (click)="openaccount()">
              <i class="ion-ios-person"></i>
              <span>ACCOUNT</span>
            </a>
          </li>
      
          <li>
            <a (click)="signout()">
              <i class="ion-information-circled"></i>
              <span>Signout</span>
            </a>
          </li>
        </ul>
      </div> -->
    <div>
<ion-title >
  
  
  <div style="float:left;text-align:left;">
      <div style="margin-right:5px;float:left;width:25px;height:25px;"> </div>
      <span  (click)="goToGroupInfo()" style="font-size:16px;text-align:center;top:-6px;position:relative;">{{title}}</span>

	</div>
  
</ion-title>

    </div>


  <ion-icon class="headerico" name="ios-call" (click)="call()"></ion-icon>
  <ion-icon class="headerico" name="ios-videocam" (click)="video()"></ion-icon>
  
  <h5 style="color:gray;margin-top:11px;margin-left:30px">
      {{lastonline}}
    </h5>	
        
  </ion-navbar>
    
</ion-header>
  
  
<ion-content>
  <main class="page pt-70 bg_white" #scrollMe [scrollTop]="scrollMe.scrollHeight" style='overflow:scroll;overflow-x:hidden;max-height:200px;' >
    
          
          
          
      <div class="rec-btn">	
        <div>
          <div style="text-align: center;
          display: table;
          margin: auto;
          color: #fff;">03:13</div>
          <button class="rec" style="text-align: center;
          display: table;
          margin: 20px auto 30px;"></button>
          <div style="margin-top:15px;width:100%;display:flex;justify-content:center;">
            <a class="btn btn-danger  remove-class" href="#"  (click)="remove()" style="padding: 4px 8px;margin: 0 5px;">Cancel</a>
            <a class="btn btn-theme  send-class " (click)="sendaudio()" href="#" style="padding: 4px 8px;margin: 0 5px;">Send</a>
          </div>
        </div>
        </div>
      <div class="chat_room full_vh">
        
      
        <div class="chat_room_body">
          <div class="container">
          <!-- <section class="chat_body"> -->
            <!-- Messages -->
            <div class="msgs chat" >
              <!-- <p>ddddd{{y}}</p> -->
            
  <div *ngFor = "let p of messages" (click)="d(p)"  >
    <div class="sender_msg " *ngIf="p.from_me == false"  >
      <div class="msg_box sender" *ngIf="p.image!='' && p.text==''"  >
                  <h4>{{title}} 	 </h4>
                  <img [src]="p.image" style=" width: 500px;
      height: 200px;" >
                  <!--<i class="ion-android-checkbox-outline"></i>-->
                  <time>{{p.time}}</time>
                  
                <!-- <i *ngIf="p.is_read==false" class="ion-android-done">
                </i>
                <i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
                
                </div>
                
                <div class="msg_box reciever" *ngIf="p.text!='' && p.image==''">
                    <div class="text_box">
                    <p>{{p.text}}</p>
                    <!-- <a href="{{p.text}}"> {{p.text}}</a> -->
                    <!--<i class="ion-android-checkbox-outline"></i>-->
                  
                    <time>{{p.time}}</time>
                    
                  <!-- <i *ngIf="p.is_read==false" class="ion-android-done">
                  </i>
                  <i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
                  </div>
                  </div>
                <div class="msg_box reciever" *ngIf="p.avatar!='' && p.image=='' && p.text==''">
                  <!-- <p>{{p.text}}</p> -->
                  <a href="{{p.avatar}}"> {{p.avatar}}</a>
                  <!--<i class="ion-android-checkbox-outline"></i>-->

                <time>{{p.time}}</time>
                <!-- <i *ngIf="p.is_read==false" class="ion-android-done">
                  </i>
                  <i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
                </div>
   
              </div>
              <!-- //Sender -->
  
              <!-- Reciever -->
              <div class="reciever_msg right_side"    *ngIf="p.from_me == true">
                  <div class="msg_box reciever" *ngIf="p.image!='' && p.text==''" >
                  <img [src]="p.image" style="width: 500px;
      height: 200px;" >
                  <!--<i class="ion-android-checkbox-outline"></i>-->
                  
                  <!-- <i *ngIf="p.is_read==false" class="ion-android-done">
                    </i>
                    <i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
                    <time>{{p.time}}</time>
                    
                </div>
                
                <div class="msg_box reciever" *ngIf="p.text!='' && p.image==''">
                  <div class="text_box">
                  <p>{{p.text}}</p>
                  <!-- <a href="{{p.text}}"> {{p.text}}</a> -->
                  <!--<i class="ion-android-checkbox-outline"></i>-->
                
                  
                <!-- <i *ngIf="p.is_read==false" class="ion-android-done">
                </i>
                <i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
                <time>{{p.time}}</time>
                
                </div>
                </div>
                <div class="msg_box reciever" *ngIf="p.avatar!='' && p.image=='' && p.text==''">
                  <h4></h4>
                  <!-- <p>{{p.text}}</p> -->
                  <!-- <a href="/images/myw3schoolsimage.jpg" download>
                    Try it rself Â»
                  </a> -->
                  <a href="{{p.avatar}}"> {{p.avatar}}</a>
                  <!--<i class="ion-android-checkbox-outline"></i>-->
  
                <!-- <i *ngIf="p.is_read==false" class="ion-android-done">
                </i>
                <i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
                <time>{{p.time}}</time>
                
                </div>
              
                <!-- <ion-icon (click)="d(p.id)"  name="ios-archive-outline">
                  </ion-icon>	 -->
              </div>
              
  </div>
              <!-- Sender -->
            
              <!-- //Reciever -->
  
            
  
  
            </div>
           
            <!-- </section> -->
          </div>
        </div>
        
      </div>
      
    </main>
   <ion-footer>
      
      
          <div class="message-box">
            
              <form [formGroup] = "userForm" >
              <div class="container chat-message-box">
                <div class="dropdown">
                  <ul class="dropdown-menu dropdown-menu-right">
                    <li><a href="#"><i class="ion-easel"></i> Share a Whiteboard</a></li>
                    <li><a href="#"><i class="ion-android-document"></i> Collaborative Document</a></li>
                    <li><a href="#"><i class="ion-android-create"></i>  Handwrite a message</a></li> 
                  </ul>
                </div>
                <div class="toggle-icons">
                  <a (click)="pickimg()" href="#"><i  class="ion-image"></i></a>
                  <a href="#" (click)="selectfile()"  ><i class="ion-videocamera"></i></a>
                      <i  class="ion-android-happy" name="s"  (click)="toggled = !toggled"
  [(emojiPickerIf)]="toggled" [emojiPickerDirection]="'bottom' || 'top'
  || 'left' || 'right'"
  
  
        (emojiPickerSelect)="handleSelection($event)">
        <!-- <ion-icon  name="md-happy">
  
                                      </ion-icon> -->
  </i>
                  <a href="#" (click)="location()"><i class="ion-radio-waves"></i></a>
                  <a href="#"><i class="ion-more"></i></a>
                </div>
                <div class="type-message">
                  <a href="#" (click)="dropdown()"><i   class="ion-android-arrow-dropup-circle"></i></a>
                  <input type="text"  name="msg" placeholder="Type Message......"
                  #input1 (keypress)="onfocus()" (focusout)="focusout()"
                  [(ngModel)]="emojitext" formControlName = "mail" name = "email">
                
                  <a href="#"(click)="presentPopover()"><i class="ion-ios-mic"></i></a>
                  <div class="button"><button (click)="send()"  [disabled] = "!userForm.valid||checkinput()"><ion-icon name="md-send"></ion-icon></button>
                    
                    </div>
                    
                </div>
              </div>
            </form>
          </div>
      
    
             <!-- <i style="position: absolute;
      bottom: 38px;
      z-index: 100000;
      right: 82px;" name="s"  (click)="toggled = !toggled"
  [(emojiPickerIf)]="toggled" [emojiPickerDirection]="'bottom' || 'top'
  || 'left' || 'right'"
  
  
        (emojiPickerSelect)="handleSelection($event)">
        <ion-icon  name="md-happy">
  
                                      </ion-icon>
  
  </i> -->
  
                    
            </ion-footer>
  
          
  </ion-content>
  <script>
   //  this.database.getApiMessages(25,this.cid).subscribe(res =>
    //   {
     
    //     this.msgs.push(res)
    //     alert("res"+res)
    //   }
    //   )
  </script>