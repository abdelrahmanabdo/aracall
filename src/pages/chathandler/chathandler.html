<!--
  Generated template for the ChathandlerPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
		<div class="dropdown" style="float: right;
		margin-right: 20px;
		margin-top: 12px;">
				
					
							  <ion-icon class="dropdown-toggle"  data-toggle="dropdown" name="more" style="color:#fff"></ion-icon>
							  
							
					
					<ul class="dropdown-menu dropdown-right" style="margin-top: 19px !important;">
					  <li ><a href="#" (click)="view_profile()" style="padding:7px 20px">View Profile </a></li>
					  <li><a href="#"  (click)="Clear_Conversation()" style="padding:7px 20px">Clear Conversation</a></li>
					  <li><a href="#"  (click)="Report_Conversation()" style="padding:7px 20px">Report Conversation</a></li>
					  <li  *ngIf="is_blocked==false"><a href="#"  (click)="Block(currentUserID)" style="padding:7px 20px">Block</a></li>
					  <li *ngIf="is_blocked==true"><a href="#"  (click)="unBlock(currentUserID)" style="padding:7px 20px">Unblock</a></li>
					</ul>
				  </div>
		
				<!-- <div class="dropdown" style="float:right;">
					
						<ion-buttons end  data-toggle="dropdown">
								<button ion-button icon-only class="dropdown-toggle" data-toggle="dropdown">
								  <ion-icon name="more"></ion-icon>
								  
								</button>
							</ion-buttons>
						
						<ul class="dropdown-menu">
						  <li><a href="#">View Profile </a></li>
						  <li><a href="#">Clear Conversation</a></li>
						  <li><a href="#">Report Conversation</a></li>
						</ul>
					  </div> -->
			  
		<!-- <div >
				<ul>
					<li>
						<a (click)="openaccount()">
							<i class="ion-ios-person"></i>
							<span>ACCOUNT</span>
						</a>
					</li>
			
					<li>
						<a (click)="signout()">
							<i class="ion-information-circled"></i>
							<span>Signout</span>
						</a>
					</li>
				</ul>
			</div> -->
	  <div>
<ion-title >
	<img [src]="remoteavatar" width="25" height="25" style="margin-right:5px;float:left;" alt=""> 
	<div style="float:left;text-align:left;">
			<span  style="font-size: 14px;position: relative;top: -12px;">{{title}}</span>
			<h5 *ngIf="settings[0].last_seen_status == '1' || settings[0].last_seen_status == null" style="color: #ededed;font-size: 10px;position: relative;top: -21px;">{{lastonline}}</h5>

	</div>
	
</ion-title>  </div>


 <div class="headerico" style="background:none;box-shadow:none;"></div>

	<div class="headerico" style="margin-left:10px;"  >	
			<ion-icon class="headerico" name="ios-videocam" *ngIf="is_blocked==false" (click)="video()"></ion-icon>
			
	</div>
	<div class="headerico" >		
		<ion-icon class="headerico" name="ios-call" *ngIf="is_blocked==false" (click)="call()"></ion-icon>
	</div>
	<!-- <ion-icon *ngIf="is_blocked==false" class="headerico" name="ios-call" (click)="call()"></ion-icon> -->
	<!-- <ion-icon *ngIf="is_blocked==false" class="headerico" name="ios-videocam" (click)="video()"></ion-icon> -->
	

	
				
  </ion-navbar>
		
</ion-header>


<ion-content>
<main class="page"  #scrollMe [scrollTop]="scrollMe.scrollHeight" style='overflow:scroll;overflow-x:hidden;max-height:200px;' >
	
				
		<div class="rec-btn">	
			<div>
				<div style="text-align: center;
				display: table;
				margin: auto;
				color: #fff;">03:13</div>
				<button class="rec" style="text-align: center;
				display: table;
				margin: 20px auto 30px;"></button>
				<div style="margin-top:15px;width:100%;display:flex;justify-content:center;">
					<a class="btn btn-danger  remove-class" href="#"  (click)="remove()" style="padding: 4px 8px;margin: 0 5px;">Cancel</a>
					<a class="btn btn-theme  send-class " (click)="sendaudio()" href="#" style="padding: 4px 8px;margin: 0 5px;">Send</a>
				</div>
			</div>
			</div>
		<div class="chat_room">
			
		
			<div class="chat_room_body">
				<div class="container">
				<!-- <section class="chat_body"> -->
					<!-- Messages -->
					<div class="msgs" >
						<!-- <p>ddddd{{y}}</p> -->
					
<div *ngFor = "let p of msgs" (click)="d(p)"  >
	<div class="sender_msg" *ngIf="p.from_me == false"  >
		<div class="msg_box sender" *ngIf="p.image!='' && p.text==''"  >
								<h4>{{title}} 
									</h4>
								<img [src]="p.image" style=" width: 500px;height: 200px;" >
								<!--<i class="ion-android-checkbox-outline"></i>-->
								<time>{{p.time}}</time>
<!-- 								
							<i *ngIf="p.is_read==false" class="ion-android-done">
							</i>
							<i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i>
							 -->
							</div>
							
							<div class="msg_box sender" *ngIf="p.text!='' && p.image==''">
								<h4>{{title}}</h4>
								<p>{{p.text}}</p>
								<!--<i class="ion-android-checkbox-outline"></i>-->
								<time>{{p.time}}</time>
<!-- 								
							<i *ngIf="p.is_read==false" class="ion-android-done">
							</i>
							<i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
							
							</div>
							<div class="msg_box reciever" *ngIf="p.avatar!='' && p.image=='' && p.text==''">
								<h4>You</h4>
								<!-- <p>{{p.text}}</p> -->
								<a href="{{p.avatar}}"> {{p.avatar}}</a>
								<!--<i class="ion-android-checkbox-outline"></i>-->
								<time>{{p.time}}</time>
<!-- 								
							<i *ngIf="p.is_read==false" class="ion-android-done">
							</i>
								<i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
								
							</div>
							<!-- <ion-icon (click)="d()"  name="ios-archive-outline"></ion-icon>
								</ion-icon> -->
						
						</div>
						<!-- //Sender -->

						<!-- Reciever -->
						<div class="reciever_msg"    *ngIf="p.from_me == true">
								<div class="msg_box reciever" *ngIf="p.image!='' && p.text==''" >
								<h4>You</h4>
								<img [src]="p.image" style="width: 500px;height: 200px;" >
								<!--<i class="ion-android-checkbox-outline"></i>-->
								<time>{{p.time}}</time>
								
							<i *ngIf="p.is_read==false" class="ion-android-done">
							</i>
							<i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i>
							
							</div>
							
							<div class="msg_box reciever" *ngIf="p.text!='' && p.image==''">
								<h4>You</h4>
								<p>{{p.text}}</p>
								<!-- <a href="{{p.text}}"> {{p.text}}</a> -->
								<!--<i class="ion-android-checkbox-outline"></i>-->
								<time>{{p.time}}</time>
<!-- 								
							<i *ngIf="p.is_read==false" class="ion-android-done">
							</i>
							<i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i> -->
							
							</div>
							<div class="msg_box reciever" *ngIf="p.avatar!='' && p.image=='' && p.text==''">
								<h4>You</h4>
								<!-- <p>{{p.text}}</p> -->
								<!-- <a href="/images/myw3schoolsimage.jpg" download>
									Try it Yourself Â»
								</a> -->
								<a href="{{p.avatar}}"> {{p.avatar}}</a>
								<!--<i class="ion-android-checkbox-outline"></i>-->
								<time>{{p.time}}</time>
								
							<!-- <i *ngIf="p.is_read==false" class="ion-android-done">
							</i>
							<i *ngIf="p.is_read==true" class="ion-android-done-all">seen </i>
							 -->
							</div>
						
							<!-- <ion-icon (click)="d(p.id)"  name="ios-archive-outline">
								</ion-icon>	 -->
						</div>
						
</div>
						<!-- Sender -->
					
						<!-- //Reciever -->

					


					</div>
         
					<!-- </section> -->
				</div>
			</div>
			
		</div>
		
	</main>
 <ion-footer>
		
		
				<div class="message-box" *ngIf='is_blocked == false || !is_blocked'>
					
						<form [formGroup] = "userForm" >
						<div class="container chat-message-box">
							<div class="dropdown">
								<ul class="dropdown-menu dropdown-menu-right">
									<li><a href="#"><i class="ion-easel"></i> Share a Whiteboard</a></li>
									<li><a href="#"><i class="ion-android-document"></i> Collaborative Document</a></li>
									<li><a href="#"><i class="ion-android-create"></i>  Handwrite a message</a></li> 
								</ul>
							</div>
							<div class="toggle-icons">
								<a (click)="pickimg()" href="#"><img style="width:19px;height:19px;"  src="../../assets/images/svg/006-image.svg"/></a>
								<a href="#" (click)="selectfile()"  ><img style="width:19px;height:19px;"  src="../../assets/images/svg/005-video.svg"/></a>
									  <i  class="ion-android-happy" name="s"  (click)="toggled = !toggled"
[(emojiPickerIf)]="toggled" [emojiPickerDirection]="'bottom' || 'top'|| 'left' || 'right'"(emojiPickerSelect)="handleSelection($event)">
      <!-- <ion-icon  name="md-happy">

                                    </ion-icon> -->
</i>
								<a href="#" (click)="location()"><img style="width:19px;height:19px;"  src="../../assets/images/svg/004-placeholder.svg"/></a>
								<a href="#"><i class="ion-more"></i></a>
							</div>
							<div class="type-message">
								<a href="#" (click)="dropdown()" class="toggle-arrow">
									<img style="width:19px;height:19px;margin-left:7px;margin-top:7px;" src="../../assets/images/svg/sort-up.svg"/>
									<img style="width:19px;height:19px;margin-left:7px;margin-top:7px;" src="../../assets/images/svg/sort-down.svg"/>
								</a>
								<input type="text"  name="msg" placeholder="Type Message......"
								#input1 (keypress)="onfocus()" (focusout)="focusout()"
								[(ngModel)]="emojitext" formControlName = "mail" name = "email">
							
								<a href="#"(click)="presentPopover()"><i class="ion-ios-mic"></i></a>
								<div class="button"><button (click)="send()"  [disabled] = "!userForm.valid||checkinput()"><ion-icon name="md-send"></ion-icon></button>
									
									</div>
									
							</div>
						</div>
					</form>
				</div>
				<div class="message-box" *ngIf='is_blocked == true'>
					<p style="text-align:center;color:#5c0632 ;font-weight:600">Sorry you can't send messages !!</p>
				</div>
	
					 <!-- <i style="position: absolute;
    bottom: 38px;
    z-index: 100000;
    right: 82px;" name="s"  (click)="toggled = !toggled"
[(emojiPickerIf)]="toggled" [emojiPickerDirection]="'bottom' || 'top'
|| 'left' || 'right'"


      (emojiPickerSelect)="handleSelection($event)">
      <ion-icon  name="md-happy">

                                    </ion-icon>

</i> -->

									
					</ion-footer>

				
</ion-content>
<script>
 //  this.database.getApiMessages(25,this.cid).subscribe(res =>
  //   {
   
  //     this.msgs.push(res)
  //     alert("res"+res)
  //   }
  //   )
</script>